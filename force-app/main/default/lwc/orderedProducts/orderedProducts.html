<template>
    <div class="slds-page-header slds-page-header_related-list">
        <div class="slds-page-header__row">
            <div class="slds-page-header__col-title">
                <lightning-breadcrumbs>
                    <lightning-breadcrumb
                        label="Orders"
                        href="/lightning/o/Order/home">
                    </lightning-breadcrumb>
                    <lightning-breadcrumb
                        label="Current Order"
                        href="/lightning/r/Order/8011F000002WQntQAG/view">
                    </lightning-breadcrumb>
                </lightning-breadcrumbs>

                <div class="slds-media">
                    <div class="slds-media__body">
                        <div class="slds-page-header__name">
                            <div class="slds-page-header__name-title">
                                <h1>
                                    <span class="slds-page-header__title slds-truncate"
                                        title="Order Name">Order {orderNumber}</span>
                                </h1>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slds-page-header__col-actions">
                <div class="slds-page-header__controls">
                    <div class="slds-page-header__control">
                        <template if:false={isConfirmed}>
                            <lightning-button label="Add Products" title="Add Products" icon-name="utility:add" class="slds-m-left_x-small" onclick={handleAddProductsClick}></lightning-button>
                            <lightning-button label="Confirm" title="Confirm" icon-name="utility:approval" class="slds-m-left_x-small" onclick={handleConfirmOrder}></lightning-button>
                        </template>
                        <template if:true={isConfirmed}>
                            <lightning-button variant="base" label="Confirmed" title="Confirmed" icon-name="utility:check" class="slds-m-left_x-small"></lightning-button>
                        </template>
                    </div>
                </div>
            </div>
        </div>
        <div class="slds-page-header__row">
            <div class="slds-page-header__col-meta">
                <p class="slds-page-header__meta-text"><small>Showing {recordCount} items</small></p>
            </div>
        </div>
        <div class="slds-page-header__row">
            <div class="slds-page-header__col-meta"><span style="display: none">{orderStatus}</span></div>
        </div>
        <div class="slds-page-header__row slds-page-header__row_gutters" style="background-color: white;">
            <div class="slds-page-header__col-details">
                <lightning-layout>
                    <lightning-layout-item flexibility="auto">
                        <div class="slds-grid">
                            <div class="slds-col slds-size_1-of-12"><span class="slds-form-element__label comboLabel">page size</span></div>
                            <div class="slds-col slds-size_2-of-12">
                                <lightning-combobox class="combobox"
                                    name="pagSize"
                                    value={recordsPerPage} 
                                    options={comboboxOptions} 
                                    onchange={handlePageSize}>
                                </lightning-combobox>
                            </div>
                            <div class="slds-col slds-size_9-of-12"><span class="slds-form-element__label comboLabel">recs.</span></div>
                        </div>                        
                    </lightning-layout-item>
                    <lightning-layout-item flexibility="auto" class="slds-has-bottom-magnet">
                        <div></div>
                    </lightning-layout-item>
                </lightning-layout>
                <div class="slds-grid slds-gutters">
                    <lightning-datatable
                        data={dataTable}
                        columns={columns}
                        key-field="Id"
                        hide-checkbox-column="true"
                        show-row-number-column
                    >
                    </lightning-datatable> 
                    <template if:true={showSpinner}>
                        <div class="spinner">
                            <lightning-spinner alternative-text="Loading" size="medium"></lightning-spinner>
                        </div>
                    </template>                        
                </div>
            </div>
        </div>
    </div>

    <!-- Filter Add Products screen -->
    <template if:true={openAddOrderableProductsDlg}>
        <c-add-orderable-products onclose={handleDlgCloseAddProduct} onproducts={handleOnProductsAdded} order-id={orderId} pricebook-id={orderPricebookId}></c-add-orderable-products>
    </template>    
</template>